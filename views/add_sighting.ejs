<!DOCTYPE html>
<html>
<head>
  <title><%= title %></title>

  <link rel='stylesheet' href='/stylesheets/style.css' />

  <script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script type="module" src="/javascripts/indexeddb.js"></script>
  <script type="module" src="/javascripts/add_sighting.js"></script>

</head>
<body>
  <% include ./partials/header.ejs %>
  <form id="add-sighting-form" enctype="multipart/form-data" method="post" action="">
    <!-- values are setted in javascripts/indexeddb.js -->
    <input id="user_session_id" name="user_session_id" type="hidden" value=""><br>
    <input id="username" name="username" type="hidden" value=""><br>

    <!-- Get the time for sighting    -->
    <label for="sighted_at">Date:</label>
    <input type="datetime-local" id="sighted_at" name="sighted_at"><br/>

    <!-- imagine this to be like a google search bar,
      with updated search result of the Wiki, need week 7/8 lectures -->
    <label for="sighting_identification">Identification</label>
    <select id="bird_name" name="identification">
      <option selected>Unknown</option>
      <option>Uncertain</option>
    </select><br/>


    <label for="sighting_description">Description:</label><br/>
    <textarea id="sighting_description" name="description" class="description" placeholder="Description" required></textarea><br/>

    <label for="sighting_image">Choose an image</label>
    <input id="sighting_image" name="image" type="file" accept="image/*" required><br>

    <h3>Sighting location</h3>
    <p>Input manually or click on the map to fill the values</p>

    <label for="latitude">Latitude:</label>
    <input id="latitude" name="latitude">
    <label for="longitude">Longitude:</label>
    <input id="longitude" name="longitude">

    <div id="map"></div><br>



    <button id="add_sighting_btn" type="submit" class="button" disabled>Add sighting</button>
  </form>
  <script>(g=>{var h,a,k,p="The Google Maps JavaScript API",c="google",l="importLibrary",q="__ib__",m=document,b=window;b=b[c]||(b[c]={});var d=b.maps||(b.maps={}),r=new Set,e=new URLSearchParams,u=()=>h||(h=new Promise(async(f,n)=>{await (a=m.createElement("script"));e.set("libraries",[...r]+"");for(k in g)e.set(k.replace(/[A-Z]/g,t=>"_"+t[0].toLowerCase()),g[k]);e.set("callback",c+".maps."+q);a.src=`https://maps.${c}apis.com/maps/api/js?`+e;d[q]=f;a.onerror=()=>h=n(Error(p+" could not load."));a.nonce=m.querySelector("script[nonce]")?.nonce||"";m.head.append(a)}));d[l]?console.warn(p+" only loads once. Ignoring:",g):d[l]=(f,...n)=>r.add(f)&&u().then(()=>d[l](f,...n))})
    ({key: "AIzaSyAtnpiUZUlLlkcq3TEPdtykPnJRTfzHjfc", v: "weekly"});</script>
  <script type="module" src='/javascripts/maps.js' />
  <% include ./partials/footer.ejs %>
</body>
</html>
